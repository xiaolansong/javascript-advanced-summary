第8章  函数
8.7 函数属性、方法和构造函数
8.7.1 length属性
在函数体里，arguments .1ength表示传人函数的实参的个数。而函数本身的length属性
则有着不同含义。函数的length属性是只读属性，它代表函数形参的数量，也就是在函数
定义时给出的实参个数，通常也是在函数调用时期望传人函数的实参个数。

8.7.2 prototype属性
每一个函数都包含- -个prototype属性，这个属性是指向-一个对象的引用，这个对象称
做“原型对象”(prototype object)。每一个函数都包含不同的原型对象。当将函数
用做构造函数的时候，新创建的对象会从原型对象上继承属性。

8.7.3 call()方法和apply()方法
我们可以将ca11()和apply()看做是某个对象的方法，通过调用方法的形式来间接调
用函数。call()和apply()的第一 一个实参是要调用函数的母对象，它是调用上下文，
在函数体内通过thi s来获得对它的引用。要想以对象o的方法来调用函数f()，可以这
样使用cal1()和app1y():
	f.call(o);
	f.app1y(o);
在ECMAScript 5的严格模式中，call()和app1y()的第一 一个实参都会变为this的值，哪
怕传入的实参是原始值甚至是nul1或undefined。在ECMAScript 3和非严格模式中，传入
的nul和undefined都会被全局对象代替，而其他原始值则会被相应的包装对象所替代。
●对于call()来说，第一个调用上下文实参之后的所有实参就是要闯入带调用函数的值。
	f.call(o,1,2)
●apply()方法和call()类似，但传入实参的形式和call()有所不同，它的实参都放入一个数组当中
	f.apply(o,[1,2])
需要时注意的是，传入apply()的参数数组可以是类数组对象也可以是真实数组。

8.7.4 bind()方法
bind()是在ECMAScript 5中新增的方法，但在ECMAScript 3中可以轻易模拟bind()。从
名字就可以看出，这个方法的主要作用就是将函数绑定至某个对象。当在函数f().上调
用bind()方法并传人一个对象o作为参数，这个方法将返回一个新的函数。(以函数调用 
的方式)调用新的函数将会把原始的函数f()当做o的方法来调用。传人新函数的任何实
参都将传入原始函数，比如:
	function f(y) { return this.x + y; } //这个是待绑定的 函数
	var o={x:1};//将要绑定的对象
	var g = f.bind(o);//通过调用g(x)来调用o.f(x)
	g(2) // =>3
ECMAScript 5中的b ind()方法不仅仅是将函数绑定至一个对象，它还附带- 些其他应
用:除了第一个实参之外，传入bind()的实参也会绑定至this,这个附带的应用是一种
常见的函数式编程技术，有时也被称为“柯里化”(currying) 。参照下面这个例子中
的bind()方法的实现:
	var sum = function(x,y) { return x + y }; //返回两个实参的和值
	//创建一个类似sum的新函数，但this的值绑定到null
	//并且第一个参数绑定到1，这个新的函数期望只传入一个实参
	var succ = sum. bind(null, 1);
	succ(2) // => 3: x绑定到1，并传入2作为实参y
	function f(y,z) { return this.x+y+z};
	//另外一个做累加计算的函数
	var g = f.bind({x:1}, 2);
	//绑定this和y
	g(3)
	// => 6: this . x绑定到1, y绑定到2，z绑定到3

8.7.5 toString()方法
和所有的JavaScript对象一样，函数也有toString()方法，ECMAScript规范规定这个
方法返回一个字符串，这个字符串和函数声明语句的语法相关。实际上，大多数(非
全部)的toString()方 法的实现都返回函数的完整源码。内置函数往往返回一个类似
“[native code]"的字符串作为函数体。

8.7.6 Function()构造函数
Function( )构造函数可以传人任意数量的字符串实参，最后一个实参所表示的文本就是
函数体;它可以包含任意的JavaScript语句，每两条语句之间用分号分隔。传人构造函数
的其他所有的实参字符串是指定函数的形参名字的字符串。如果定义的函数不包含任何
参数，只须给构造函数简单地传入一个字符串一函数体一- 即可。
注意，Functi on()构造函数并不需要通过传人实参以指定函数名。就像函数直接量一
样，Function()构造函数创建-一个匿 名函数。
关于Function()构造函数有几点需要特别注意:
●Function( )构造函数允许JavaScript在运行时动态地创建并编译函数。
●每次调用Function()构造函数都会解析函数体，并创建新的函数对象。如果是在一
个循环或者多次调用的函数中执行这个构造函数，执行效率会受影响。相比之下，
循环中的嵌套函数和函数定义表达式则不会每次执行时都重新编译。
●最后一点，也是关于Function()构造函数非常重要的一点，就是它所创建的函数并
不是使用词法作用域，相反，函数体代码的编译总是会在顶层函数执行，




