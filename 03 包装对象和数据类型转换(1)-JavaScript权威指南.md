JavaScript权威指南 第三章 

JavaScript的数据类型分为两类:原始类型(primitive type)和对象类型(object type）
JavaScript中的原始类型包括数字、字符串和布尔值，还有两个特殊的原始值：null(空)和undefined(未定义)
JavaScript变量是无类型的(untyped),变量可以被赋予任何类型的值，同样一个变量，也可以重新赋予不同类型的值。使用var关键字来声明(declare) 变量。


3.6 包装对象
JavaScript对象是一种复合值，它是属性或已命名值的集合。通过“.”符号来引用属性值。
当属性值是一个函数时，称其为方法，通过o.m()来调用对象o中的m方法。

字符串也具有属性和方法。
字符串既然不是对象，为什么它会有属性呢?
只要引用了字符串s的属性，JavaScript就会将字符串值通过调用new String(s)的方式转换成对象，这个对象继承了字符串的方法，并被用来处理属性的引用。
一旦属性引用结束，这个新创建的对象就会销毁(其实在实现上并不一定创建或销毁这个临时对象，然而整个过程看起来是这样)。

同字符串一样，数字和布尔值也具有各自的方法:通过Number()和Boolean()构造 函数创建一个临时对象，这些方法的调用均是来自于这个临时对象。
null和undefined没有 包装对象:访问它们的属性会造成一个类型错误。

存取字符串、数字或布尔值的属性时创建的临时对象称做包装对象，它只是偶尔用来区分字符串值和字符串对象、数字和数值对象以及布尔值和布尔对象。
通常，包装对象只是被看做是一种实现细节，而不用特别关注。
由于字符串、数字和布尔值的属性都是只读的，并且不能给它们定义新属性，因此它们是有别于对象的。

可通过String(),Number()或Boolean()构造函数来显式创建包装对象；
JavaScript会在必要时将包装对象转换成原始值，“==”等于运算符将原始值和其包装对象视为相等，但“==”全等运算符将它们视为不等。
通过typeof运算符可以看到原始值和其包装对象的不同。


3.7 不可变的原始值和可变的对象引用
JavaScript中的原始值(undefined、 null、 布尔值、数字和字符串)与对象(包括数组和函数)有着根本区别。
原始值是不可更改的：任何方法都无法更改一个原始值。
原始值的比较是值的比较：只有在它们的值相等时它们才相等。

对象和原始值不同，首先，它们是可变的——它们的值是可以修改的。
对象的比较并非值的比较:即使两个对象包含同样的属性及相同的值，它们也是不相等的。
各个索引元素完全相等的两个数组也不相等。
我们通常将对象称为引用类型(reference type)，以此来和JavaScript的基本类型区分开来。
对象值都是引用(reference) ，对象的比较均是引用的比较:当且仅当它们引用同一个基对象时，它们才相等。
如果想比较两个单独的对象或者数组，则必须比较它们的属性或元素。


3.8 类型转换
原始值到对象的转换通过调用String()、Number()或Boolean()构造函数，转换为它们各自的包装对象。

3.8.1 转换和相等性
"=="宽松相等
"==="严格相等
一个值转换为另一个值并不意味着两个值相等

3.8.2 显式类型转换
做显式类型转换最简单的方法就是使用Boolean()、Number()、String()或Object()函数。
除了null和undefined之外的任何值都具有toString()方法，这个方法的执行结果通常和String(0方法的返回结果一致。

JavaScript中的某些运算符会做隐式的类型转换，有时用于类型转换。
如果“+”运算符的一个操作数是字符串，它将会把另外一个操作数转换为字符串。x+"";等价于String(x);
一元“+”运算符将其操作数转换为数字。+x;等价于Number(x),也可以写成x-0
同样，一元“!”运算符将其操作数转换为布尔值并取反。!!x;等价于Boolean(x)

Number类定义的toString()方法可以接收表示转换基数的可选参数，如果不指定此参数，转换规则将是基于十进制。
var n=17;
a=n.toString(2);//转换为"10001"
b=n.toString(8);//转换为"o21"
c=n.toString(16);//转换为"ox11"
如果通过Number()转换函数传入一个字符串，它会试图将其转换为一个整数或浮点数直接量，这个方法只能基于十进制数进行转换，并且不能出现非法的尾随字符。
parseInt()函数和parseFloat()函数（它们是全局函数，不从属于任何类的方法）更加灵活。
parseInt()只解析整数，而parseFloat()则可以解析整数和浮点数。
如果字符串前缀是“0x” 或者“0X”，parseInt()将其解释为十六进制数， parseInt()和parseFloat()都会跳过任意数量的前导空格，尽可能解析更多数值字符，并忽略后面的内容。
如果第-一个非空格字符是非法的数字直接量，将最终返回NaN；
parseInt()可以接收第二个参数，这个参数指定数字转换的基数，合法的取值范围是2-36。

3.8.3 对象转换为原始值

对象到布尔值的转换非常简单，所有的对象（包括数组和函数）都转换为true。对于包装对象也是如此。

JavaScript中对象到字符串的转换经过了如下步骤：
如果对象具有toString()方法，则调用这个方法。如果它返回一个原始值,JavaScript将这个值转换为字符串(如果本身不是字符串的话)，并返回这个字符串结果。
如果对象没有toString()方法，或者这个方法并不返回一个原始值，那么JavaScript会调用value0f()方法。如果存在这个方法，则JavaScript调用它。如果返回值是原始值，JavaScript将这个值转换为字符串( 如果本身不是字符串的话) ,并返回这个字符串结果。
否则，JavaScript无法从toString()或valueOf()获得一个原始值，因此这时它将抛出一个类型的错误异常。

JavaScript中对象到数字的转换经历了如下步骤：
如果对象具有value0f()方法，后者返回一个原始值，则JavaScript将这 个原始值转换为数字(如果需要的话)并返回这个数字。
否则，如果对象具有toString()方法，后者返回一个原始值，则JavaScript将其转换并返回，
否则，JavaScript拋 出一个类型错误异常。

JavaScript中的“+” 运算符可以进行数学加法和字符串连接操作。
如果它的其中一个操作数是对象，则JavaScript将 使用特殊的方法将对象转换为原始值，而不是使用其他算术运算符的方法执行对象到数字的转换；
“==” 相等运算符与此类似。如果将对象和一个原始值比较，则转换将会遵照对象到原始值的转换方式进行。

对于所有非日期的对象来说，对象到原始值的转换基本上是对象到数字的转换(首先调用value0f())，
日期对象则使用对象到字符串的转换模式，然而，这里的转换和上文讲述的并不完全一致: 通过value0f()或toString()返回的原始值将被直接使用，而不会被强制转换为数字或字符串。
除去日期对象的特殊情形，任何对象对象都会首先尝试调用valueOf(),然后调用toString()。不管得到的原始值是否直接使用，它都不会进一步转换为数字或字符串。

"=" "==" "!="和关系运算符是唯一执行这种特殊的字符串到原始值的转换方式的运算符。



3.1 数字
当一个数字直接出现在JavaScript程序中，我们称之为数字直接量。

3.1.1 整型直接量
在JavaScript程序中，用一个数字表示一个十进制整数。
出了十进制的整型直接量，JavaScript同样能识别十六进制值。

3.1.2 浮点型直接量
浮点型直接量可以含有小数点，它们采用的是传统的实数写法。一个实数由整数部分、小数点和小数部分组成。
此外，还可以使用指数记数法表示浮点型直接量，即在实数后跟字母e或E,后面再跟正负号，其后再加一个整型的指数。这种记数方法表示的数值，是由前面的实数乘以10的指数次幂。

3.1.2 JavaScript中的算术运算
JavaScript程序是使用语言本身提供的算术运算符来进行数字运算的。
这些运算符包括加法运算符(+) 、减法运算符(-)、乘法运算符(*)、除法运算符(1) 和求余(求整除后的余数)运算符(%)。
除了基本的运算符外，JavaScript还 支持更加复杂的算术运算，这些复杂运算通过作为Math对象的属性定义的函数和常量来实现。
Math.round();四舍五入    Math.cell();向上求整    Math.floor();向下求整    Math.abs();求绝对值
JavaScript中的算术运算在溢出(overflow) 、下溢(underflow) 或被零整除时不会报错。
JavaScript中的非数字值有一点特殊:它和任何值都不相等，包括自身。也就是说，没办法通过x==Na N来判断变量x是否是NaN。
相反，应当使用x!=x来判断，当且仅当x为NaN的时候，表达式的结果才为true。函数i s NaN()的作用与此类似，如果参数是NaN或者是一个非数字值(比如字符串和对象)，则返回true。


3.2 文本
JavaScript通过字符串类型类表示文本。
JavaScript字符串 (和其数组)的索引从零开始:第一个字符的位置是0，第二个字符的位置是1，以此类推。空字符串(empty string) 长度为0。
JavaScript中并没有表示单个字符的“字符型”。要表示一个16位值，只需将其赋值给字符串变量即可，这个字符串长度为1。

3.2.1 字符串直接量
在JavaScript程序中的字符串直接量，是由单引号或双引号括起来的字符序列。
在ECMAScript 5中，字符串直接量可以拆分成数行，每行必须以反斜线(\) 结束，反斜线和行结束符都不算是字符串直接量的内容。
如果希望在字符串直接量中另起一-行，可以使用转义字符\n 

3.2.2 转义字符
在JavaScript字符串中，反斜线(\)有着特殊的用途，反斜线符号后加上一个字符，就不再表示他们的字面含义了。
\n换行符    \v垂直制表符    \f换页符    \r回车符

3.2.3 字符串的使用
JavaScript的内置功能之一就是字符串连接。如果将加号(+)运算符用于数字，表示两数相加。
但将它作用于字符串，则表示字符串连接，将第二个字符串拼接在第一个之后。
字符串可以调用的方法：
var s="hello,world"
s.length 得到字符串的长度
s.charAt(0) 得到第一个字符
s.subString(1,4) 得到第2-4个字符
s.slice(1,4) 得到第2-4个字符
s.slice(-3) 得到最后三个字符
s.indexOf('1') 字符1首次出现的位置
s.lastIndexOf('1') 字符1最后一次出现的位置
s.indexOf('1'，3) 在位置3及之后首次出现字符1的位置
s.split(",") 通过逗号将字符串分割成数组["hello","world"]


3.3 布尔值
任意JavaScript的值都可以转换成布尔值。
undefined null 0 -0 NaN ""(空字符串)会被转换成false
所有其他值，包括所有对象（数组）都会转换成true
“&&”运算符执行了逻辑与(AND)操作。当且仅当两个操作数都是真值时它才返回true;否则返回false。
“||” 运算符是布尔或(OR) 操作，如果两个操作数其中之一为真值它就返回true，如果两个操作数都是假值则返回false。
“!" 执行了布尔非(NOT) 操作:如果操作数是真值则返回false;如果是假值，则返回true。




